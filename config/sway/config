# Minimal Sway Configuration
# Self-contained, no external dependencies

# Include default NixOS sway config (provides dbus/systemd integration)
include /etc/sway/config.d/*

# Variables
set $mod Mod4
set $term alacritty
set $menu rofi -show drun

# Appearance
default_border pixel 2
font pango:monospace 10
output * bg #1a1b26 solid_color

# Window colors
client.focused          #7aa2f7 #7aa2f7 #ffffff #7aa2f7 #7aa2f7
client.focused_inactive #565f89 #565f89 #a9b1d6 #565f89 #565f89
client.unfocused        #1a1b26 #1a1b26 #565f89 #1a1b26 #1a1b26
client.urgent           #f7768e #f7768e #ffffff #f7768e #f7768e

# Input configuration
input * {
    xkb_layout us
    xkb_options caps:escape
}

input type:touchpad {
    tap enabled
    natural_scroll disabled
    dwt enabled
}

input type:pointer {
    natural_scroll disabled
}

# Systemd environment
exec systemctl --user import-environment DISPLAY WAYLAND_DISPLAY SWAYSOCK

# Window rules
for_window [app_id="^pavucontrol$"] floating enable
for_window [app_id="blueman-manager"] floating enable

# Workspace management
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10

bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10

# Window management
bindsym $mod+Return exec $term
bindsym $mod+Shift+q kill
bindsym $mod+d exec $menu
bindsym $mod+Shift+c reload
bindsym $mod+Shift+e exec swaynag -t warning -m 'Exit sway?' -b 'Yes, exit sway' 'swaymsg exit'

# Focus navigation
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# Move windows
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

# Tiling & layout
bindsym $mod+b splith
bindsym $mod+v splitv
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split
bindsym $mod+f fullscreen toggle
bindsym $mod+Shift+space floating toggle
bindsym $mod+a focus parent

# Scratchpad
bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show

# Resize mode
mode "resize" {
    bindsym h resize shrink width 10px or 10 ppt
    bindsym j resize grow height 10px or 10 ppt
    bindsym k resize shrink height 10px or 10 ppt
    bindsym l resize grow width 10px or 10 ppt
    bindsym Left resize shrink width 10px or 10 ppt
    bindsym Down resize grow height 10px or 10 ppt
    bindsym Up resize shrink height 10px or 10 ppt
    bindsym Right resize grow width 10px or 10 ppt
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

# Media keys (optional - only work if packages are installed)
bindsym XF86AudioRaiseVolume exec pactl set-sink-volume @DEFAULT_SINK@ +5%
bindsym XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -5%
bindsym XF86AudioMute exec pactl set-sink-mute @DEFAULT_SINK@ toggle
bindsym XF86MonBrightnessUp exec brightnessctl set +10%
bindsym XF86MonBrightnessDown exec brightnessctl set 10%-

# Focus follows mouse
focus_follows_mouse yes
mouse_warping output
